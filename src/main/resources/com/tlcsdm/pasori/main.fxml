<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<VBox xmlns:fx="http://javafx.com/fxml/1"
      xmlns="http://javafx.com/javafx/21"
      fx:controller="com.tlcsdm.pasori.controller.MainController"
      spacing="10" prefWidth="900" prefHeight="700">

    <!-- Menu Bar -->
    <MenuBar>
        <Menu text="%menu.file">
            <MenuItem text="%menu.settings" onAction="#handleOpenSettings"/>
            <SeparatorMenuItem/>
            <MenuItem text="%menu.restart" onAction="#handleRestart"/>
            <MenuItem text="%menu.exit" onAction="#handleExit"/>
        </Menu>
        <Menu text="%menu.tool">
            <MenuItem text="%menu.exportLog" onAction="#handleExportLog"/>
        </Menu>
        <Menu text="%menu.help">
            <MenuItem text="%menu.about" onAction="#handleAbout"/>
        </Menu>
    </MenuBar>

    <VBox spacing="10" VBox.vgrow="ALWAYS">
        <padding>
            <Insets top="10" right="10" bottom="10" left="10"/>
        </padding>

        <!-- Header -->
        <HBox alignment="CENTER">
            <Label text="%app.title" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
        </HBox>

        <!-- Connection Panels -->
        <HBox spacing="20" VBox.vgrow="NEVER">
            <!-- PaSoRi Connection Panel -->
            <VBox spacing="10" HBox.hgrow="ALWAYS" style="-fx-border-color: #ccc; -fx-border-radius: 5; -fx-padding: 10;">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="%pasori.device" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <Circle fx:id="pasoriStatusIndicator" radius="6" fill="GRAY"/>
                    <Label fx:id="pasoriStatusLabel" text="%pasori.disconnected"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="%label.port" prefWidth="50"/>
                    <ComboBox fx:id="pasoriPortCombo" prefWidth="150" promptText="Select port"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="%label.baud" prefWidth="50"/>
                    <ComboBox fx:id="pasoriBaudCombo" prefWidth="150"/>
                </HBox>
                
                <HBox spacing="10">
                    <Button fx:id="pasoriConnectBtn" text="%button.connect" onAction="#handlePasoriConnect" prefWidth="80"/>
                    <Button fx:id="pasoriDisconnectBtn" text="%button.disconnect" onAction="#handlePasoriDisconnect" prefWidth="80" disable="true"/>
                </HBox>
            </VBox>

            <!-- Bridge Control Panel -->
            <VBox spacing="10" alignment="CENTER" style="-fx-border-color: #ccc; -fx-border-radius: 5; -fx-padding: 10;">
                <Label text="%bridge.control" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <ToggleButton fx:id="bridgeToggle" text="%bridge.off" onAction="#handleBridgeToggle" 
                              prefWidth="100" prefHeight="40" disable="true"/>
                <Button fx:id="refreshPortsBtn" text="%button.refreshPorts" onAction="#handleRefreshPorts"/>
            </VBox>

            <!-- アンテナIF Connection Panel -->
            <VBox spacing="10" HBox.hgrow="ALWAYS" style="-fx-border-color: #ccc; -fx-border-radius: 5; -fx-padding: 10;">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="%antenna.device" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    <Circle fx:id="antennaStatusIndicator" radius="6" fill="GRAY"/>
                    <Label fx:id="antennaStatusLabel" text="%antenna.disconnected"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="%label.port" prefWidth="50"/>
                    <ComboBox fx:id="antennaPortCombo" prefWidth="150" promptText="Select port"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="%label.baud" prefWidth="50"/>
                    <ComboBox fx:id="antennaBaudCombo" prefWidth="150"/>
                </HBox>
                
                <HBox spacing="10">
                    <Button fx:id="antennaConnectBtn" text="%button.connect" onAction="#handleAntennaConnect" prefWidth="80"/>
                    <Button fx:id="antennaDisconnectBtn" text="%button.disconnect" onAction="#handleAntennaDisconnect" prefWidth="80" disable="true"/>
                </HBox>
            </VBox>
        </HBox>

        <!-- Communication Log -->
        <VBox spacing="5" VBox.vgrow="ALWAYS" style="-fx-border-color: #ccc; -fx-border-radius: 5; -fx-padding: 10;">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="%log.title" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="%log.filter"/>
                <CheckBox fx:id="filterPasoriToAntennaCheck" text="%log.filter.pasoriToAntenna" selected="true"/>
                <CheckBox fx:id="filterAntennaToPasoriCheck" text="%log.filter.antennaToPasori" selected="true"/>
                <CheckBox fx:id="filterSystemCheck" text="%log.filter.system" selected="true"/>
                <Separator orientation="VERTICAL"/>
                <CheckBox fx:id="autoScrollCheck" text="%log.autoScroll" selected="true"/>
                <Button fx:id="clearLogBtn" text="%button.clear" onAction="#handleClearLog"/>
            </HBox>
            
            <TextArea fx:id="logTextArea" VBox.vgrow="ALWAYS" editable="false" wrapText="true" style="-fx-font-family: monospace;"/>
        </VBox>

        <!-- Manual Send Panel -->
        <VBox spacing="5" style="-fx-border-color: #ccc; -fx-border-radius: 5; -fx-padding: 10;">
            <Label text="%send.title" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <TextField fx:id="sendDataField" HBox.hgrow="ALWAYS" promptText="%send.placeholder"/>
                <fx:define>
                    <ToggleGroup fx:id="sendTargetGroup"/>
                </fx:define>
                <RadioButton fx:id="sendToPasoriRadio" text="%send.toPasori" toggleGroup="$sendTargetGroup" selected="true"/>
                <RadioButton fx:id="sendToAntennaRadio" text="%send.toAntenna" toggleGroup="$sendTargetGroup"/>
                <Button fx:id="sendBtn" text="%button.send" onAction="#handleSendData" prefWidth="80"/>
            </HBox>
        </VBox>

    </VBox>
</VBox>
